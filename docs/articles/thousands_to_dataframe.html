<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Thousands of Papers to Dataframe â€¢ petroOne</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">petroOne</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="..//index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/paper_types.html">Document types for Papers</a>
    </li>
    <li>
      <a href="../articles/thousands_to_dataframe.html">Thousands of Papers to Dataframe</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Thousands of Papers to Dataframe</h1>
                        <h4 class="author">Alfonso R. Reyes</h4>
            
            <h4 class="date">2017-10-09</h4>
          </div>

    
    
<div class="contents">
<p>The maximum number of rows that a OnePetro query can return is 1000. It means that the user could set up the query to return up to amximum of 1000 papers. Abover that number, the query to OnePetro will return error.</p>
<p>OnePetro has options to define the number of rows to display at 10, 50 and 100 rows. Additionally, through scripts like these, that number could be raised up to 1,000.</p>
<p>This article describes the process of reading multiple pages with thousand of papers to a unique dataframe.</p>
<p>Retrieve the most numerous paper by type</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(petroOne)

<span class="co"># folder where we will save the results</span>
outdir &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">"out"</span>, <span class="dt">package =</span> <span class="st">"petroOne"</span>)</code></pre></div>
<div id="perform-a-initial-search" class="section level2">
<h2 class="hasAnchor">
<a href="#perform-a-initial-search" class="anchor"></a>Perform a initial search</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_url &lt;-<span class="st"> </span><span class="kw"><a href="../reference/make_search_url.html">make_search_url</a></span>(<span class="dt">query =</span> <span class="st">"pressure transient analysis"</span>, 
                          <span class="dt">how =</span> <span class="st">"all"</span>)

<span class="kw"><a href="../reference/get_papers_count.html">get_papers_count</a></span>(my_url)</code></pre></div>
<pre><code>## [1] 3995</code></pre>
</div>
<div id="what-type-of-paper-do-we-have" class="section level2">
<h2 class="hasAnchor">
<a href="#what-type-of-paper-do-we-have" class="anchor"></a>What type of paper do we have?</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">result &lt;-<span class="st"> </span><span class="kw"><a href="../reference/read_onepetro.html">read_onepetro</a></span>(my_url)
<span class="kw"><a href="../reference/summary_by_doctype.html">summary_by_doctype</a></span>(result)</code></pre></div>
<pre><code>## # A tibble: 7 x 2
##               name value
##              &lt;chr&gt; &lt;dbl&gt;
## 1          Chapter     1
## 2 Conference paper  3027
## 3          General    60
## 4    Journal paper   894
## 5            Media     5
## 6            Other     1
## 7     Presentation     7</code></pre>
<p>For the tyme being we will retrieve only conference papers.</p>
</div>
<div id="collect-first-1000-rows" class="section level2">
<h2 class="hasAnchor">
<a href="#collect-first-1000-rows" class="anchor"></a>Collect first 1000 rows</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># we use "conference-paper" only because other document types have</span>
<span class="co"># different dataframe structure</span>

my_url_1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/make_search_url.html">make_search_url</a></span>(<span class="dt">query =</span> <span class="st">"pressure transient analysis"</span>, 
                          <span class="dt">how =</span> <span class="st">"all"</span>, 
                          <span class="dt">dc_type =</span> <span class="st">"conference-paper"</span>,
                          <span class="dt">start =</span> <span class="dv">0</span>,
                          <span class="dt">rows  =</span> <span class="dv">1000</span>)

<span class="kw"><a href="../reference/get_papers_count.html">get_papers_count</a></span>(my_url_1)</code></pre></div>
<pre><code>## [1] 3027</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">page_1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/read_onepetro.html">read_onepetro</a></span>(my_url_1)
htm_1 &lt;-<span class="st"> </span><span class="kw">paste</span>(outdir, <span class="st">"pta-01-conference.html"</span>, <span class="dt">sep =</span> <span class="st">"/"</span>)
xml2::<span class="kw">write_html</span>(page_1, <span class="dt">file =</span> htm_1)
<span class="kw"><a href="../reference/onepetro_page_to_dataframe.html">onepetro_page_to_dataframe</a></span>(htm_1)</code></pre></div>
<pre><code>## # A tibble: 1,000 x 6
##                                                         title_data
##                                                              &lt;chr&gt;
##  1                             Pressure Transient Analysis in SAGD
##  2                           Well-head Pressure Transient Analysis
##  3  Pressure Transient Analysis of Multifractured Horizontal Wells
##  4 Integrating Pressure Transient Analysis in Hydraulic Fracturing
##  5        How Wellbore Dynamics Affect Pressure Transient Analysis
##  6         Software Showcase: Pressure Transient Analysis Programs
##  7  Pressure Transient Analysis in Multilayered Faulted Reservoirs
##  8                Pressure-Transient Analysis for Perforated Wells
##  9             Numerical Solutions for Pressure Transient Analysis
## 10     Automated Pressure Transient Analysis with Smart Technology
## # ... with 990 more rows, and 5 more variables: paper_id &lt;chr&gt;,
## #   source &lt;chr&gt;, type &lt;chr&gt;, year &lt;chr&gt;, author1_data &lt;chr&gt;</code></pre>
</div>
<div id="collect-second-set-of-1000-rows" class="section level2">
<h2 class="hasAnchor">
<a href="#collect-second-set-of-1000-rows" class="anchor"></a>Collect second set of 1000 rows</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_url_2 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/make_search_url.html">make_search_url</a></span>(<span class="dt">query =</span> <span class="st">"pressure transient analysis"</span>, 
                          <span class="dt">how =</span> <span class="st">"all"</span>, 
                          <span class="dt">dc_type =</span> <span class="st">"conference-paper"</span>,
                          <span class="dt">start =</span> <span class="dv">1000</span>,
                          <span class="dt">rows  =</span> <span class="dv">1000</span>)

page_2 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/read_onepetro.html">read_onepetro</a></span>(my_url_2)
htm_2 &lt;-<span class="st"> </span><span class="kw">paste</span>(outdir, <span class="st">"pta-02-conference.html"</span>, <span class="dt">sep =</span> <span class="st">"/"</span>)
xml2::<span class="kw">write_html</span>(page_2, <span class="dt">file =</span> htm_2)
<span class="kw"><a href="../reference/onepetro_page_to_dataframe.html">onepetro_page_to_dataframe</a></span>(htm_2)</code></pre></div>
<pre><code>## # A tibble: 1,000 x 6
##                                                                     title_data
##                                                                          &lt;chr&gt;
##  1 Storativity Ratio, Matrix/Fracture Permeability Ratio, Fracture Partitionin
##  2 Integration Wireline Formation Testing and Well Testing Evaluation - An Exa
##  3 An Integrated Approach to Designing an Offshore Heavy Oil Well Test - North
##  4  Setting a New Milestone in Carbonate Matrix Stimulation with Coiled Tubing
##  5                             Transient Analysis in Partially Completed Wells
##  6 Performance of Plugless Toe Stages and Non-Isolated Wellbore in Multi-Stage
##  7 Comprehensive Global Model for Before-Closure Analysis of an Injection Fall
##  8 New Approach for Using Surfactants to Enhance Oil Recovery from Naturally F
##  9 New Variable Compliance Method for Estimating In-Situ Stress and Leak-Off f
## 10 Well-Reservoir Coupling on the Numerical Simulation of Horizontal Wells in 
## # ... with 990 more rows, and 5 more variables: paper_id &lt;chr&gt;,
## #   source &lt;chr&gt;, type &lt;chr&gt;, year &lt;chr&gt;, author1_data &lt;chr&gt;</code></pre>
</div>
<div id="collect-next-set-of-1000-rows" class="section level2">
<h2 class="hasAnchor">
<a href="#collect-next-set-of-1000-rows" class="anchor"></a>Collect next set of 1000 rows</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_url_3 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/make_search_url.html">make_search_url</a></span>(<span class="dt">query =</span> <span class="st">"pressure transient analysis"</span>, 
                          <span class="dt">how =</span> <span class="st">"all"</span>, 
                          <span class="dt">dc_type =</span> <span class="st">"conference-paper"</span>,
                          <span class="dt">start =</span> <span class="dv">2000</span>,
                          <span class="dt">rows  =</span> <span class="dv">1000</span>)

page_3 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/read_onepetro.html">read_onepetro</a></span>(my_url_3)
htm_3 &lt;-<span class="st"> </span><span class="kw">paste</span>(outdir, <span class="st">"pta-03-conference.html"</span>, <span class="dt">sep =</span> <span class="st">"/"</span>)
xml2::<span class="kw">write_html</span>(page_3, <span class="dt">file =</span> htm_3)
<span class="kw"><a href="../reference/onepetro_page_to_dataframe.html">onepetro_page_to_dataframe</a></span>(htm_3)</code></pre></div>
<pre><code>## # A tibble: 1,000 x 6
##                                                                     title_data
##                                                                          &lt;chr&gt;
##  1 Numerical Simulations Of The Combined Effects Of Wellbore Damage And Partia
##  2 An Integrated Team Approach for Improving Company-Wide Stimulation Design a
##  3 Transformation of Failure to Success in Revival of Production by Overcoming
##  4 Heat Transfer Ahead of a SAGD Steam Chamber: A Study of Thermocouple Data F
##  5 EOR Potential for Lean Gas Reinjection in Zipper Fracs in Liquid-Rich Basin
##  6 Influence of Wellbore Hydraulics on Pressure Behavior and Productivity of H
##  7        Geothermal Reservoir Testing by Piezometric Surface Drawdown/Buildup
##  8 Wildcat Hills Gas Gathering System Case Studies: An Integrated Approach Fro
##  9    Cuttings Injection And Monitoring Operations: Cashiriari Gas Field, Peru
## 10 A Synopsis on Completion Efficiency for Multi Stage Acid Fracturing Technol
## # ... with 990 more rows, and 5 more variables: paper_id &lt;chr&gt;,
## #   source &lt;chr&gt;, type &lt;chr&gt;, year &lt;chr&gt;, author1_data &lt;chr&gt;</code></pre>
</div>
<div id="collect-remaining-set" class="section level2">
<h2 class="hasAnchor">
<a href="#collect-remaining-set" class="anchor"></a>Collect remaining set</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_url_4 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/make_search_url.html">make_search_url</a></span>(<span class="dt">query =</span> <span class="st">"pressure transient analysis"</span>, 
                          <span class="dt">how =</span> <span class="st">"all"</span>, 
                          <span class="dt">dc_type =</span> <span class="st">"conference-paper"</span>,
                          <span class="dt">start =</span> <span class="dv">3000</span>,
                          <span class="dt">rows  =</span> <span class="dv">100</span>)

page_4 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/read_onepetro.html">read_onepetro</a></span>(my_url_4)
htm_4 &lt;-<span class="st"> </span><span class="kw">paste</span>(outdir, <span class="st">"pta-04-conference.html"</span>, <span class="dt">sep =</span> <span class="st">"/"</span>)
xml2::<span class="kw">write_html</span>(page_4, <span class="dt">file =</span> htm_4)
<span class="kw"><a href="../reference/onepetro_page_to_dataframe.html">onepetro_page_to_dataframe</a></span>(htm_4)</code></pre></div>
<pre><code>## # A tibble: 27 x 6
##                                                                     title_data
##                                                                          &lt;chr&gt;
##  1 Pressure Transient and Decline Curve Behaviors in Naturally Fractured Vuggy
##  2                                  Reservoir Modeling in Shale-Gas Reservoirs
##  3 Analytical Matrix-Fracture Transfer Models For Oil Recovery by Hindered-Cap
##  4 The Significance of Non-Darcy and Multiphase Flow Effects in High-Rate, Fra
##  5 Rate Transient and Decline Curve Analyses for Continuously (Dual-Porosity) 
##  6      Effect Of Drainage Area Shapes On The Productivity Of Horizontal Wells
##  7 Vertical Fracture Growth Considerations in the Mission Canyon/Ratcliffe For
##  8                    Analysis of Injection/Falloff Data From Horizontal Wells
##  9 Innovative Use of Open-Hole Wireline Formation Pressure Testing in Waterflo
## 10 Key Parameters Affecting Successful Hydraulic Fracture Design and Optimized
## # ... with 17 more rows, and 5 more variables: paper_id &lt;chr&gt;,
## #   source &lt;chr&gt;, type &lt;chr&gt;, year &lt;chr&gt;, author1_data &lt;chr&gt;</code></pre>
</div>
<div id="binding-tables-in-one-dataframe" class="section level2">
<h2 class="hasAnchor">
<a href="#binding-tables-in-one-dataframe" class="anchor"></a>Binding tables in one dataframe</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/onepetro_page_to_dataframe.html">onepetro_page_to_dataframe</a></span>(htm_1)
p2 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/onepetro_page_to_dataframe.html">onepetro_page_to_dataframe</a></span>(htm_2)
p3 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/onepetro_page_to_dataframe.html">onepetro_page_to_dataframe</a></span>(htm_3)
p4 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/onepetro_page_to_dataframe.html">onepetro_page_to_dataframe</a></span>(htm_4)

papers &lt;-<span class="st"> </span><span class="kw">rbind</span>(p1, p2, p3, p4)
papers</code></pre></div>
<pre><code>## # A tibble: 3,027 x 6
##                                                         title_data
##                                                              &lt;chr&gt;
##  1                             Pressure Transient Analysis in SAGD
##  2                           Well-head Pressure Transient Analysis
##  3  Pressure Transient Analysis of Multifractured Horizontal Wells
##  4 Integrating Pressure Transient Analysis in Hydraulic Fracturing
##  5        How Wellbore Dynamics Affect Pressure Transient Analysis
##  6         Software Showcase: Pressure Transient Analysis Programs
##  7  Pressure Transient Analysis in Multilayered Faulted Reservoirs
##  8                Pressure-Transient Analysis for Perforated Wells
##  9             Numerical Solutions for Pressure Transient Analysis
## 10     Automated Pressure Transient Analysis with Smart Technology
## # ... with 3,017 more rows, and 5 more variables: paper_id &lt;chr&gt;,
## #   source &lt;chr&gt;, type &lt;chr&gt;, year &lt;chr&gt;, author1_data &lt;chr&gt;</code></pre>
</div>
<div id="find-which-papers-have-the-search-word-in-the-title" class="section level2">
<h2 class="hasAnchor">
<a href="#find-which-papers-have-the-search-word-in-the-title" class="anchor"></a>Find which papers have the search word in the title</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pattern &lt;-<span class="st"> "pressure transient analysis"</span>
rows &lt;-<span class="st"> </span><span class="kw">grep</span>(<span class="dt">pattern =</span> pattern, papers$title_data, <span class="dt">ignore.case =</span> <span class="ot">TRUE</span>)
papers[rows, ]</code></pre></div>
<pre><code>## # A tibble: 161 x 6
##                                                                     title_data
##                                                                          &lt;chr&gt;
##  1                                         Pressure Transient Analysis in SAGD
##  2                                       Well-head Pressure Transient Analysis
##  3              Pressure Transient Analysis of Multifractured Horizontal Wells
##  4             Integrating Pressure Transient Analysis in Hydraulic Fracturing
##  5                    How Wellbore Dynamics Affect Pressure Transient Analysis
##  6                     Software Showcase: Pressure Transient Analysis Programs
##  7              Pressure Transient Analysis in Multilayered Faulted Reservoirs
##  8                         Numerical Solutions for Pressure Transient Analysis
##  9                 Automated Pressure Transient Analysis with Smart Technology
## 10 Pressure Transient Analysis as an Element of Permanent Reservoir Monitoring
## # ... with 151 more rows, and 5 more variables: paper_id &lt;chr&gt;,
## #   source &lt;chr&gt;, type &lt;chr&gt;, year &lt;chr&gt;, author1_data &lt;chr&gt;</code></pre>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#perform-a-initial-search">Perform a initial search</a></li>
      <li><a href="#what-type-of-paper-do-we-have">What type of paper do we have?</a></li>
      <li><a href="#collect-first-1000-rows">Collect first 1000 rows</a></li>
      <li><a href="#collect-second-set-of-1000-rows">Collect second set of 1000 rows</a></li>
      <li><a href="#collect-next-set-of-1000-rows">Collect next set of 1000 rows</a></li>
      <li><a href="#collect-remaining-set">Collect remaining set</a></li>
      <li><a href="#binding-tables-in-one-dataframe">Binding tables in one dataframe</a></li>
      <li><a href="#find-which-papers-have-the-search-word-in-the-title">Find which papers have the search word in the title</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Alfonso Reyes.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
